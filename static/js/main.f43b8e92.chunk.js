(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,r,t){},15:function(e,r,t){},17:function(e,r,t){},19:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t.n(a),o=t(2),s=t.n(o),c=(t(13),t(3)),i=t(4),u=t(6),m=t(5),l=t(7),g=(t(15),t(17),window.mapboxgl),d=function(e,r){return[e,r]},p={1910:{url:"./compressed-maps/1910-smaller.jpg",corners:[[-122.25368381624293,37.87666271788129],[-122.25205864680986,37.8690054551667],[-122.26567321115618,37.867273073426304],[-122.26725246910868,37.87479602627526]]}},L=function(e){return e},k={container:"map",zoom:13,minZoom:11,maxZoom:21,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:128}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:24}]},customAttribution:"Satellite map source: Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",center:[-122.259491,37.873931]},S=function(e){function r(){var e;return Object(c.a)(this,r),(e=Object(u.a)(this,Object(m.a)(r).call(this))).imageOverlayAdded=!1,e.sources={},e.state={},e.lastMarkerUpdate=0,e.currentOverlaySourceName=null,e.addSource=function(r,t){e.sources[r]||(e.sources[r]=e.map.addSource(r,{type:"image",url:L(p[r].url),coordinates:p[r].corners}))},e.setImageOverlay=function(r){e.imageOverlayAdded||(e.imageOverlayAdded=!0,e.currentOverlaySourceName=r,e.map.addLayer({id:"imageOverlay",source:r,type:"raster",paint:{"raster-opacity":.8}}))},e.setImage=function(r){var t=p[r];if(!t)throw new Error("Scan doesnt exist:",r);e.currentSource=r,e.addSource(r,t.corners),e.setImageOverlay(r),e.markers[0].setLngLat(t.corners[0]),e.markers[1].setLngLat(t.corners[1]),e.markers[2].setLngLat(t.corners[2]),e.markers[3].setLngLat(t.corners[3])},e.updateCorners=function(r){if(null!=e.currentSource)if(!r&&Date.now()-e.lastMarkerUpdate<500)setTimeout(e.updateCorners,Date.now()-e.lastMarkerUpdate+2);else{e.lastMarkerUpdate=Date.now();var t=e.map.getSource(e.currentOverlaySourceName),a=p[e.currentOverlaySourceName];t.setCoordinates(a.corners),console.log("'".concat(e.currentOverlaySourceName,"': {url:'").concat(a.url,"', corners: [[").concat(a.corners[0][0],",").concat(a.corners[0][1],"], [").concat(a.corners[1][0],",").concat(a.corners[1][1],"], [").concat(a.corners[2][0],",").concat(a.corners[2][1],"], [").concat(a.corners[3][0],",").concat(a.corners[3][1],"],]},"))}},e.updateScan=function(r,t,a){if(null!=e.currentSource){var n=e.map.getSource(e.currentOverlaySourceName),o=p[e.currentOverlaySourceName];n&&o?(o.corners[0]=[e.markers[0].getLngLat().lng,e.markers[0].getLngLat().lat],o.corners[1]=[e.markers[1].getLngLat().lng,e.markers[1].getLngLat().lat],o.corners[2]=[e.markers[2].getLngLat().lng,e.markers[2].getLngLat().lat],o.corners[3]=[e.markers[3].getLngLat().lng,e.markers[3].getLngLat().lat]):console.log("Something was empty",n,o)}},e}return Object(l.a)(r,e),Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this,r=new g.Map(k);this.map=r,this.markers=[new g.Marker({draggable:!0}),new g.Marker({draggable:!0}),new g.Marker({draggable:!0}),new g.Marker({draggable:!0})],this.markers[0].on("drag",function(){return e.updateScan(0,e.markers[0].getLngLat())}),this.markers[1].on("drag",function(){return e.updateScan(1,e.markers[1].getLngLat())}),this.markers[2].on("drag",function(){return e.updateScan(2,e.markers[2].getLngLat())}),this.markers[3].on("drag",function(){return e.updateScan(3,e.markers[3].getLngLat())}),this.markers[0].on("dragend",function(){return e.updateScan(0,e.markers[0].getLngLat(),!0)}),this.markers[1].on("dragend",function(){return e.updateScan(1,e.markers[1].getLngLat(),!0)}),this.markers[2].on("dragend",function(){return e.updateScan(2,e.markers[2].getLngLat(),!0)}),this.markers[3].on("dragend",function(){return e.updateScan(3,e.markers[3].getLngLat(),!0)}),this.markers[0].setLngLat(d(-122.2530116318478,37.81644774444351)).addTo(r),this.markers[1].setLngLat(d(-122.3771954185537,37.88231391877983)).addTo(r),this.markers[2].setLngLat(d(-122.2526683090948,37.89885189380466)).addTo(r),this.markers[3].setLngLat(d(-122.2530116318478,37.81644774444351)).addTo(r),r.on("click",function(e){!function(){for(var e,r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];(e=console).log.apply(e,["[Local debugger]"].concat(t))}("".concat(e.lngLat))}),setTimeout(function(){e.setImage("1910")},1e3),r.boxZoom.disable(),r.addControl(new g.NavigationControl),r.addControl(new g.AttributionControl({compact:!0}),"top-left"),window.map=r}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{id:"map"}))}}]),r}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,r,t){e.exports=t(19)}},[[8,2,1]]]);
//# sourceMappingURL=main.f43b8e92.chunk.js.map